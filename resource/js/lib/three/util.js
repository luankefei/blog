function toTHREEColor(n){return new THREE.Color(parseInt(n.substr(1),16))}function toMonthName(n){return monthNames[n]}function componentToHex(n){var t=n.toString(16);return t.length==1?"0"+t:t}function rgbToHex(n,t,i){return"#"+componentToHex(n)+componentToHex(t)+componentToHex(i)}function gup(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+n+"=([^&#]*)",r=new RegExp(i),t=r.exec(window.location.href);return t==null?"":t[1]}function wrap(n,t,i){i-=t;while(n<t)n+=i;return n%i}function getAbsOrigin(n){var i=n.matrixWorld,t=new THREE.Vector3;return t.x=i.n14,t.y=i.n24,t.z=i.n34,t}function screenXY(n){var f=new THREE.Projector,u=f.projectVector(n.clone(),camera),i={},t=window.innerWidth,r=1280;return t<r&&(t=r),i.x=Math.round(u.x*(t/2))+t/2,i.y=Math.round((0-u.y)*(window.innerHeight/2))+window.innerHeight/2,i}function buildHexColumnGeo(n,t){for(var f=[],r=0,h=Math.PI/3,u,e,i=0;i<7;i++)u=Math.cos(r)*n,e=-Math.sin(r)*n,f.push(new THREE.Vector2(u,e)),r+=h;var c=new THREE.Shape(f),o={size:0,amount:t,steps:1,bevelEnabled:!1};return new THREE.ExtrudeGeometry(c,o)}function map(n,t,i,r,u){return r+(u-r)*(n-t)/(i-t)}function numberWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function roundNumber(n,t){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)}function save(n,t,i){function e(r){var f=function(){r.root.getFile("data.tar",{create:!0},function(r){r.createWriter(function(u){var f=new window.WebKitBlobBuilder,e;n=o(n),e=s(t,n.byteLength,i),f.append(e),f.append(n),u.write(f.getBlob("tar/archive")),window.open(r.toURL(),"_blank","width=400,height=10")},u("Error creating writer"))},u("Error getting file"))};r.root.getFile("data.tar",{create:!1},function(n){n.remove(f,u("Error deleting file"))},f)}function r(n,t,i,r){for(var f,e=0,o=Math.min(n.length,r),u=0;u<o;u++)f=n.charCodeAt(u),t[i]=f,e+=f,i+=1;return e}function f(n,t){var r,i;if(t<n.length)throw new Error("Incompatible size");for(r=t-n.length,i=0;i<r;i++)n="0"+n;return n}function s(n,t){var s=new ArrayBuffer(512),e=new Uint8Array(s),u=0,o;return u+=r(n,e,0,99),u+=r(t.toString(8),e,124,12),u+=r(f("644 \0",8),e,100,8),o=+new Date,o=Math.floor(o/1e3),u+=r(o.toString(8),e,136,12),u+=r("0",e,156,1),u+=r("ustar ",e,257,6),u+=r("00",e,263,2),u+=256,r(f(u.toString(8)+"\0 ",8),e,148,8),s}function o(n){for(var r=512-n.length%512,i=new ArrayBuffer(n.length+r),u=new Uint8Array(i),t=0;t<n.length;t++)u[t]=n.charCodeAt(t);return i}function u(n){return function(t){console.log(n,t)}}window.webkitRequestFileSystem(window.TEMPORARY,1048576,e,u("Error getting file system"))}function wrap(n,t,i){i-=t;while(n<t)n+=i;return n%i}var monthNames=new Array(12);monthNames[0]="January",monthNames[1]="February",monthNames[2]="March",monthNames[3]="April",monthNames[4]="May",monthNames[5]="June",monthNames[6]="July",monthNames[7]="August",monthNames[8]="September",monthNames[9]="October",monthNames[10]="November",monthNames[11]="December",THREE.Curve.Utils.createLineGeometry=function(n){for(var i=new THREE.Geometry,t=0;t<n.length;t++)i.vertices.push(n[t]);return i}